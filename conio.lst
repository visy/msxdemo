                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.0 #5416 (Mar 22 2009) (Mac OS X i386)
                              4 ; This file was generated Thu Feb  8 13:14:38 2018
                              5 ;--------------------------------------------------------
                              6 	.module conio
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _putdec
                             13 	.globl _puthex
                             14 	.globl _puts
                             15 	.globl _puthex8
                             16 	.globl _puthex16
                             17 	.globl _putdec8
                             18 	.globl _putdec16
                             19 ;--------------------------------------------------------
                             20 ; special function registers
                             21 ;--------------------------------------------------------
                             22 ;--------------------------------------------------------
                             23 ;  ram data
                             24 ;--------------------------------------------------------
                             25 	.area _DATA
                             26 ;--------------------------------------------------------
                             27 ; overlayable items in  ram 
                             28 ;--------------------------------------------------------
                             29 	.area _OVERLAY
                             30 ;--------------------------------------------------------
                             31 ; external initialized ram data
                             32 ;--------------------------------------------------------
                             33 ;--------------------------------------------------------
                             34 ; global & static initialisations
                             35 ;--------------------------------------------------------
                             36 	.area _HOME
                             37 	.area _GSINIT
                             38 	.area _GSFINAL
                             39 	.area _GSINIT
                             40 ;--------------------------------------------------------
                             41 ; Home
                             42 ;--------------------------------------------------------
                             43 	.area _HOME
                             44 	.area _HOME
                             45 ;--------------------------------------------------------
                             46 ; code
                             47 ;--------------------------------------------------------
                             48 	.area _CODE
                             49 ;conio.c:7: void puts(char *s) {
                             50 ;	---------------------------------
                             51 ; Function puts
                             52 ; ---------------------------------
   0000                      53 _puts_start::
   0000                      54 _puts:
   0000 DD E5                55 	push	ix
   0002 DD 21 00 00          56 	ld	ix,#0
   0006 DD 39                57 	add	ix,sp
                             58 ;conio.c:8: while (*s != 0) {
   0008 DD 4E 04             59 	ld	c,4 (ix)
   000B DD 46 05             60 	ld	b,5 (ix)
   000E                      61 00101$:
   000E 0A                   62 	ld	a,(bc)
   000F 5F                   63 	ld	e,a
   0010 B7                   64 	or	a,a
   0011 28 0C                65 	jr	Z,00104$
                             66 ;conio.c:9: putchar(*s);
   0013 C5                   67 	push	bc
   0014 7B                   68 	ld	a,e
   0015 F5                   69 	push	af
   0016 33                   70 	inc	sp
   0017 CDr00s00             71 	call	_putchar
   001A 33                   72 	inc	sp
   001B C1                   73 	pop	bc
                             74 ;conio.c:10: s++;
   001C 03                   75 	inc	bc
   001D 18 EF                76 	jr	00101$
   001F                      77 00104$:
   001F DD E1                78 	pop	ix
   0021 C9                   79 	ret
   0022                      80 _puts_end::
                             81 ;conio.c:15: void puthex(int8_t nibbles, uint16_t v) {
                             82 ;	---------------------------------
                             83 ; Function puthex
                             84 ; ---------------------------------
   0022                      85 _puthex_start::
   0022                      86 _puthex:
   0022 DD E5                87 	push	ix
   0024 DD 21 00 00          88 	ld	ix,#0
   0028 DD 39                89 	add	ix,sp
                             90 ;conio.c:16: int8_t i = nibbles - 1;
   002A DD 7E 04             91 	ld	a,4 (ix)
   002D 3D                   92 	dec	a
   002E 4F                   93 	ld	c,a
                             94 ;conio.c:17: while (i >= 0) {
   002F                      95 00104$:
   002F 79                   96 	ld	a,c
   0030 CB 7F                97 	bit	7,a
   0032 C2r80s00             98 	jp	NZ,00107$
                             99 ;conio.c:18: uint16_t aux = (v >> (i << 2)) & 0x000F;
   0035 79                  100 	ld	a,c
   0036 5F                  101 	ld	e,a
   0037 17                  102 	rla	
   0038 9F                  103 	sbc	a,a
   0039 57                  104 	ld	d,a
   003A CB 23               105 	sla	e
   003C CB 12               106 	rl	d
   003E CB 23               107 	sla	e
   0040 CB 12               108 	rl	d
   0042 7B                  109 	ld	a,e
   0043 3C                  110 	inc	a
   0044 F5                  111 	push	af
   0045 DD 5E 05            112 	ld	e,5 (ix)
   0048 DD 56 06            113 	ld	d,6 (ix)
   004B F1                  114 	pop	af
   004C 18 04               115 	jr	00116$
   004E                     116 00115$:
   004E CB 3A               117 	srl	d
   0050 CB 1B               118 	rr	e
   0052                     119 00116$:
   0052 3D                  120 	dec	a
   0053 20 F9               121 	jr	NZ,00115$
   0055 7B                  122 	ld	a,e
   0056 E6 0F               123 	and	a,#0x0F
                            124 ;conio.c:19: uint8_t n = aux & 0x000F;
   0058 E6 0F               125 	and	a,#0x0F
   005A 5F                  126 	ld	e,a
   005B 43                  127 	ld	b,e
                            128 ;conio.c:20: if (n > 9)
   005C 3E 09               129 	ld	a,#0x09
   005E 90                  130 	sub	a,b
   005F 30 0F               131 	jr	NC,00102$
                            132 ;conio.c:21: putchar('A' + (n - 10));
   0061 78                  133 	ld	a,b
   0062 C6 37               134 	add	a,#0x37
   0064 5F                  135 	ld	e,a
   0065 C5                  136 	push	bc
   0066 7B                  137 	ld	a,e
   0067 F5                  138 	push	af
   0068 33                  139 	inc	sp
   0069 CDr00s00            140 	call	_putchar
   006C 33                  141 	inc	sp
   006D C1                  142 	pop	bc
   006E 18 0C               143 	jr	00103$
   0070                     144 00102$:
                            145 ;conio.c:23: putchar('0' + n);
   0070 78                  146 	ld	a,b
   0071 C6 30               147 	add	a,#0x30
   0073 47                  148 	ld	b,a
   0074 C5                  149 	push	bc
   0075 C5                  150 	push	bc
   0076 33                  151 	inc	sp
   0077 CDr00s00            152 	call	_putchar
   007A 33                  153 	inc	sp
   007B C1                  154 	pop	bc
   007C                     155 00103$:
                            156 ;conio.c:24: i--;
   007C 0D                  157 	dec	c
   007D C3r2Fs00            158 	jp	00104$
   0080                     159 00107$:
   0080 DD E1               160 	pop	ix
   0082 C9                  161 	ret
   0083                     162 _puthex_end::
                            163 ;conio.c:29: void puthex8(uint8_t v) {
                            164 ;	---------------------------------
                            165 ; Function puthex8
                            166 ; ---------------------------------
   0083                     167 _puthex8_start::
   0083                     168 _puthex8:
   0083 DD E5               169 	push	ix
   0085 DD 21 00 00         170 	ld	ix,#0
   0089 DD 39               171 	add	ix,sp
                            172 ;conio.c:30: puthex(2, (uint16_t) v);
   008B DD 4E 04            173 	ld	c,4 (ix)
   008E 06 00               174 	ld	b,#0x00
   0090 C5                  175 	push	bc
   0091 3E 02               176 	ld	a,#0x02
   0093 F5                  177 	push	af
   0094 33                  178 	inc	sp
   0095 CDr22s00            179 	call	_puthex
   0098 F1                  180 	pop	af
   0099 33                  181 	inc	sp
   009A DD E1               182 	pop	ix
   009C C9                  183 	ret
   009D                     184 _puthex8_end::
                            185 ;conio.c:34: void puthex16(uint16_t v) {
                            186 ;	---------------------------------
                            187 ; Function puthex16
                            188 ; ---------------------------------
   009D                     189 _puthex16_start::
   009D                     190 _puthex16:
   009D DD E5               191 	push	ix
   009F DD 21 00 00         192 	ld	ix,#0
   00A3 DD 39               193 	add	ix,sp
                            194 ;conio.c:35: puthex(4, v);
   00A5 DD 6E 04            195 	ld	l,4 (ix)
   00A8 DD 66 05            196 	ld	h,5 (ix)
   00AB E5                  197 	push	hl
   00AC 3E 04               198 	ld	a,#0x04
   00AE F5                  199 	push	af
   00AF 33                  200 	inc	sp
   00B0 CDr22s00            201 	call	_puthex
   00B3 F1                  202 	pop	af
   00B4 33                  203 	inc	sp
   00B5 DD E1               204 	pop	ix
   00B7 C9                  205 	ret
   00B8                     206 _puthex16_end::
                            207 ;conio.c:39: void putdec(int16_t digits, uint16_t v) {
                            208 ;	---------------------------------
                            209 ; Function putdec
                            210 ; ---------------------------------
   00B8                     211 _putdec_start::
   00B8                     212 _putdec:
   00B8 DD E5               213 	push	ix
   00BA DD 21 00 00         214 	ld	ix,#0
   00BE DD 39               215 	add	ix,sp
                            216 ;conio.c:40: while (digits > 0) {
   00C0                     217 00101$:
   00C0 3E 00               218 	ld	a,#0x00
   00C2 DD 96 04            219 	sub	a,4 (ix)
   00C5 3E 00               220 	ld	a,#0x00
   00C7 DD 9E 05            221 	sbc	a,5 (ix)
   00CA F2r17s01            222 	jp	P,00104$
                            223 ;conio.c:41: uint16_t aux = v / digits;
   00CD DD 4E 04            224 	ld	c,4 (ix)
   00D0 DD 46 05            225 	ld	b,5 (ix)
   00D3 C5                  226 	push	bc
   00D4 FD E1               227 	pop	iy
   00D6 FD E5               228 	push	iy
   00D8 DD 6E 06            229 	ld	l,6 (ix)
   00DB DD 66 07            230 	ld	h,7 (ix)
   00DE E5                  231 	push	hl
   00DF CDr00s00            232 	call	__divuint_rrx_s
   00E2 F1                  233 	pop	af
   00E3 F1                  234 	pop	af
   00E4 44                  235 	ld	b,h
   00E5 4D                  236 	ld	c,l
   00E6 C5                  237 	push	bc
   00E7 FD E1               238 	pop	iy
                            239 ;conio.c:42: uint8_t n = aux % 10;
   00E9 21 0A 00            240 	ld	hl,#0x000A
   00EC E5                  241 	push	hl
   00ED FD E5               242 	push	iy
   00EF CDr00s00            243 	call	__moduint_rrx_s
   00F2 F1                  244 	pop	af
   00F3 F1                  245 	pop	af
                            246 ;conio.c:43: putchar('0' + n);
   00F4 7D                  247 	ld	a,l
   00F5 C6 30               248 	add	a,#0x30
   00F7 F5                  249 	push	af
   00F8 33                  250 	inc	sp
   00F9 CDr00s00            251 	call	_putchar
   00FC 33                  252 	inc	sp
                            253 ;conio.c:44: digits /= 10;
   00FD 21 0A 00            254 	ld	hl,#0x000A
   0100 E5                  255 	push	hl
   0101 DD 6E 04            256 	ld	l,4 (ix)
   0104 DD 66 05            257 	ld	h,5 (ix)
   0107 E5                  258 	push	hl
   0108 CDr00s00            259 	call	__divsint_rrx_s
   010B F1                  260 	pop	af
   010C F1                  261 	pop	af
   010D 44                  262 	ld	b,h
   010E DD 75 04            263 	ld	4 (ix),l
   0111 DD 70 05            264 	ld	5 (ix),b
   0114 C3rC0s00            265 	jp	00101$
   0117                     266 00104$:
   0117 DD E1               267 	pop	ix
   0119 C9                  268 	ret
   011A                     269 _putdec_end::
                            270 ;conio.c:49: void putdec8(uint8_t v) {
                            271 ;	---------------------------------
                            272 ; Function putdec8
                            273 ; ---------------------------------
   011A                     274 _putdec8_start::
   011A                     275 _putdec8:
   011A DD E5               276 	push	ix
   011C DD 21 00 00         277 	ld	ix,#0
   0120 DD 39               278 	add	ix,sp
                            279 ;conio.c:50: putdec(100, (uint16_t) v);
   0122 DD 4E 04            280 	ld	c,4 (ix)
   0125 06 00               281 	ld	b,#0x00
   0127 C5                  282 	push	bc
   0128 21 64 00            283 	ld	hl,#0x0064
   012B E5                  284 	push	hl
   012C CDrB8s00            285 	call	_putdec
   012F F1                  286 	pop	af
   0130 F1                  287 	pop	af
   0131 DD E1               288 	pop	ix
   0133 C9                  289 	ret
   0134                     290 _putdec8_end::
                            291 ;conio.c:54: void putdec16(uint16_t v) {
                            292 ;	---------------------------------
                            293 ; Function putdec16
                            294 ; ---------------------------------
   0134                     295 _putdec16_start::
   0134                     296 _putdec16:
   0134 DD E5               297 	push	ix
   0136 DD 21 00 00         298 	ld	ix,#0
   013A DD 39               299 	add	ix,sp
                            300 ;conio.c:55: putdec(10000, v);
   013C DD 6E 04            301 	ld	l,4 (ix)
   013F DD 66 05            302 	ld	h,5 (ix)
   0142 E5                  303 	push	hl
   0143 21 10 27            304 	ld	hl,#0x2710
   0146 E5                  305 	push	hl
   0147 CDrB8s00            306 	call	_putdec
   014A F1                  307 	pop	af
   014B F1                  308 	pop	af
   014C DD E1               309 	pop	ix
   014E C9                  310 	ret
   014F                     311 _putdec16_end::
                            312 	.area _CODE
                            313 	.area _CABS
